import { IArbitrage } from "../../abi";
import { Arbitrage } from "../../constants/addressBook";
import { walletClient } from "../config/client";

async function makeFlashLoan() {
  const tokens = [
    "0x5E0543f61F94B40c9A5265b5B3a7B35aa8Dc6B49",
    "0x81b58Ae322E933f8238505538A73FE81Ad4f2B1E",
  ];
  const amounts = [100000000000000000000n, 100000000000000000000n];

  const data =
    "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000001b02da8cb0d097eb8d57a175b88c7d8b47997506000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001048803dbee0000000000000000000000000000000000000000000000056bc75e2d63100000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000003450f6837ad2015a4067aa5900b3e0d36ad49bcc000000000000000000000000000000000000000000000000000000006693ca8a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000005e0543f61f94b40c9a5265b5b3a7b35aa8dc6b4900000000000000000000000081b58ae322e933f8238505538a73fe81ad4f2b1e000000000000000000000000000000000000000000000000000000000000000000000000000000008cfe327cec66d1c090dd72bd0ff11d690c33a2eb0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000010438ed17390000000000000000000000000000000000000000000000056bc75e2d63100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000003450f6837ad2015a4067aa5900b3e0d36ad49bcc000000000000000000000000000000000000000000000000000000006693ca8a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000081b58ae322e933f8238505538a73fe81ad4f2b1e0000000000000000000000005e0543f61f94b40c9a5265b5b3a7b35aa8dc6b4900000000000000000000000000000000000000000000000000000000";

  const tx = await walletClient.writeContract({
    address: Arbitrage,
    abi: IArbitrage,
    functionName: "makeFlashLoan",
    args: [tokens, amounts, data],
  });

  console.log(`tx: ${tx}`);
}

await makeFlashLoan();
